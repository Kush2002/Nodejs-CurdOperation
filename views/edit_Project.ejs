<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>
        <%=title%>
    </title>
    <link rel="shortcut icon" href="/img/favicon.ico"/>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/simple-line-icons/2.4.1/css/simple-line-icons.min.css"
        rel="stylesheet">
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.3.2/css/bootstrap.min.css"
        integrity="sha512-b2QcS5SsA8tZodcDtGRELiGv5SaKSk1vDHDaQRda0htPYWZ6046lr3kJ5bAAQdpV2mmA/4v0wQF9MyU6/pDIAg=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
        integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
</head>

<body>
    <nav class="navbar navbar-expand-lg bg-primary" data-bs-theme="dark">
        <div class="container-fluid">
            <div class="collapse navbar-collapse" id="navbarColor02">
                <ul class="nav navbar-nav me-auto">
                    <% if (user && user.role==='admin' ) { %>
                        <li class="nav-item">
                            <a class="nav-link active" href="/home">Home
                                <span class="visually-hidden">(current)</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link active" href="/client">Client Management</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link active" href="/employee">Employee Management</a>
                        </li>
                        <% } %>
                            <li class="nav-item">
                                <a class="nav-link active" href="/project">Project Management</a>
                            </li>
                </ul>
                <ul class="nav navbar-nav ml-auto">
                    <li class="nav-item"><span class="nav-link">Login Guest :-</span></li>
                    <li class="nav-item"><span class="active nav-link">
                            <%= user.username %>
                        </span></li>
                    <li class="nav-item">
                        <button type="click" id="adminlogoutBtn" class="btn btn-danger"><i class="fa fa-sign-out"
                                style="font-size:15px;color:white; margin-right: 5px;"></i>LOGOUT</button>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
    <form id="update_project" data-id="<%=edit_project.id%>">
        <div class="container px-4 py-5 mx-auto">
            <div class="card card1">
                <div class="row justify-content-center my-auto">
                    <div class="col-md-8 col-10 my-5">
                        <h3 class="mb-5 text-center heading">
                            <%= text%>
                        </h3>
                <div class="form-group form-control-label text-muted">
                    <label for="projectName">Project Name</label>
                    <input type="text" id="projectName" class="form-control" name="projectName"
                        placeholder="Project Name" value="<%=edit_project.projectName%>">
                </div>
                <div class="form-group form-control-label text-muted">
                    <label for="desc">Description</label>
                    <input type="text" id="desc" class="form-control" name="description"
                        value="<%=edit_project.description%>">
                </div>
                <div class="form-group form-control-label text-muted">
                    <label for="sdate">Start Date</label>
                    <input type="date" id="sdate" class="form-control" name="startDates"
                        value="<%= formatDate(edit_project.startDates) %>">
                </div>
                <div class="form-group form-control-label text-muted">
                    <label for="edate">End Date</label>
                    <input type="date" id="edate" class="form-control" name="endDates"
                        value="<%= formatDate(edit_project.endDates) %>">
                </div>
                <!-- DROPBOX -->
                <div class="form-group form-control-label text-muted">
                    <label for="names" style="margin: 5px;">Select a User Name </label>
                    <select class="btn-sm dropdown-toggle" name="username" id="names">
                        <% for (let i = 0; i < client.length; i++) { %>
                            <option value="<%= client[i].username %>" <% if(client[i].username === edit_project.username) { %>selected<% } %>> <%= client[i].username %></option>
                        <% } %>              
                    </select>
                    </div><br>
                    <!-- CHECKBOX -->
                    <div id="checkGroup">
                        <label for="">Employee</label>
                        <% for (let i = 0; i < employee.length; i++) { %>
                            <div class="form-check">
                                <label class="form-check-label"><%= employee[i].empName %></label>
                                <input type="checkbox" class="form-check-input" id="check<%= i + 1 %>" name="employeeCheckbox" value="<%= employee[i].empName %>" 
                                <% if (edit_project && edit_project.empName.includes(employee[i].empName)) { %>checked<% } %>>
                            </div>
                          <% } %>
                        </div><br>         
                <div class="form-group form-control-label text-muted">
                    <label for="notes">Notes</label>
                    <input type="text" id="notes" class="form-control" name="notes" value="<%=edit_project.notes%>">
                </div>
                <div class="form-group row justify-content-center my-4 px-3">
                    <button type="submit" class="btn btn-outline-success">UPDATE PROJECT</button>
                </div>
            </form>
        </div>
        <% function formatDate(dateString) { 
        const date=new Date(dateString); 
        const month=String(date.getMonth() +1).padStart(2, '0' ); 
        const year=date.getFullYear(); 
        const day=String(date.getDate()).padStart(2, '0' ); 
        return `${year}-${month}-${day}`; } %>
        <script src="https://cdn.jsdelivr.net/npm/axios@1.6.7/dist/axios.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.3.2/js/bootstrap.bundle.min.js"
            integrity="sha512-X/YkDZyjTf4wyc2Vy16YGCPHwAY8rZJY+POgokZjQB2mhIRFJCckEGc6YyX9eNsPfn0PzThEuNs+uaomE5CO6A=="
            crossorigin="anonymous" referrerpolicy="no-referrer"></script>
        <script src="/js/bundle.js"></script>
</body>

</html>